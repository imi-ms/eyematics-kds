{
  "resourceType": "StructureDefinition",
  "id": "mii-pr-dokument",
  "url": "https://www.medizininformatik-initiative.de/fhir/ext/modul-dok/StructureDefinition/mii-pr-dokument",
  "name": "MII_PR_DokumentMetadaten",
  "title": "MII Profile Dokument",
  "status": "draft",
  "description": "Erforderliche Metadaten für Dokumentenaustausch in der MII",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "DocumentReference",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/DocumentReference",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "DocumentReference.meta.profile",
        "path": "DocumentReference.meta.profile",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.masterIdentifier",
        "path": "DocumentReference.masterIdentifier",
        "short": "Versionsspezifische OID des Dokuments",
        "comment": "Abweichend zu ISiK ist die Angabe eines MasterIdentifiers nicht erforderlich.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.masterIdentifier.system",
        "path": "DocumentReference.masterIdentifier.system",
        "short": "Namensraum des Identifiers",
        "comment": "Fix: `urn:ietf:rfc:3986`",
        "min": 1,
        "patternUri": "urn:ietf:rfc:3986",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.masterIdentifier.value",
        "path": "DocumentReference.masterIdentifier.value",
        "short": "Wert des Identifiers",
        "comment": "OID mit URI-Präfix &quot;urn:oid:&quot;. Es sei darauf hingewiesen, dass OIDs auf Basis von UUIDs generiert werden können, ohne einen eigenen Namesraum zu beantragen. Zunächst müssen hierzu alle 128 Bit der UUID in einen Integer-Wert umgerechnet werden. Das Ergebnis muss ohne Bindestriche an die Root-OID '2.25' angehängt werden. Siehe [IHE International - Creating Unique IDs - OID and UUID](https://wiki.ihe.net/index.php/Creating_Unique_IDs_-_OID_and_UUID).",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.identifier",
        "path": "DocumentReference.identifier",
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.status",
        "path": "DocumentReference.status",
        "short": "Status des Dokumentenmetadatensatzes",
        "comment": "Der Status des Dokumentes wird in DocumentReference.docStatus gesetzt!",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.docStatus",
        "path": "DocumentReference.docStatus",
        "short": "Bearbeitungsstatus des Dokumentes",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type",
        "path": "DocumentReference.type",
        "short": "Dokumententyp",
        "comment": "Abweichend zu ISiK ist die Angabe eines Dokumententyps nicht erforderlich.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type.coding",
        "path": "DocumentReference.type.coding",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "min": 1
      },
      {
        "id": "DocumentReference.type.coding:KDL",
        "path": "DocumentReference.type.coding",
        "sliceName": "KDL",
        "short": "Dokumenttyp gem. KDL-Terminologie",
        "min": 1,
        "max": "1",
        "patternCoding": {
          "system": "http://dvmd.de/fhir/CodeSystem/kdl"
        },
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "http://dvmd.de/fhir/ValueSet/kdl"
        }
      },
      {
        "id": "DocumentReference.type.coding:KDL.system",
        "path": "DocumentReference.type.coding.system",
        "short": "Kodiersystem",
        "comment": "Fix: &quot;http://dvmd.de/fhir/CodeSystem/kdl&quot;",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type.coding:KDL.code",
        "path": "DocumentReference.type.coding.code",
        "short": "Code",
        "comment": "Der KDL-Code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type.coding:KDL.display",
        "path": "DocumentReference.type.coding.display",
        "short": "Anzeigetext",
        "comment": "Der Anzeigetext zum KDL-Code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type.coding:XDS",
        "path": "DocumentReference.type.coding",
        "sliceName": "XDS",
        "short": "Dokumenttyp gem. IHE-De-Terminologie",
        "comment": "Die Übermittlung des XDS-Type-Codes ist im Rahmen der Dokumentenbereitstellung für Clients nicht verpflichtend,\n  MUSS jedoch vom Server bei der Entgegennahme ggf. ergänzt und bei der Dokumentenabfrage zurückgegeben werden. Der XDS-Type-Code kann über die im Rahmen der [KDL-Spezifikation](https://simplifier.net/kdl) publizierten\n  [ConceptMaps](https://simplifier.net/kdl/~resources?category=ConceptMap) aus dem KDL-Code ermittelt werden",
        "min": 0,
        "max": "1",
        "patternCoding": {
          "system": "http://ihe-d.de/CodeSystems/IHEXDStypeCode"
        },
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "http://ihe-d.de/ValueSets/IHEXDStypeCode"
        }
      },
      {
        "id": "DocumentReference.type.coding:XDS.system",
        "path": "DocumentReference.type.coding.system",
        "short": "Kodiersystem",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type.coding:XDS.code",
        "path": "DocumentReference.type.coding.code",
        "short": "Code",
        "comment": "Der XDS-Type-Code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.type.coding:XDS.display",
        "path": "DocumentReference.type.coding.display",
        "short": "Anzeigetext",
        "comment": "Der Anzeigetext zum XDS-Type-Code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.category",
        "path": "DocumentReference.category",
        "short": "Dokumentklasse/-Kategorie",
        "comment": "Die Kategorisierung von Dokumenten erfolgt mittels der von IHE Deutschland publizierten XDS-Class-Codes.\n  Die übermittlung des XDS-Class-Codes ist im Rahmen der Dokumentenbereitstellung für Clients nicht verpflichtend,\n  muss jedoch vom Server bei der Entgegennahme ggf. ergänzt und bei der Dokumentenabfrage zurückgegeben werden.\n  Der XDS-Class-Code kann mit Hilfe der bereitgestellten [ConceptMap](https://simplifier.net/kdl/~resources?category=ConceptMap)\n  aus dem KDL-Code ermittelt werden.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.category.coding",
        "path": "DocumentReference.category.coding",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "min": 1
      },
      {
        "id": "DocumentReference.category.coding:XDS",
        "path": "DocumentReference.category.coding",
        "sliceName": "XDS",
        "min": 1,
        "max": "1",
        "patternCoding": {
          "system": "http://ihe-d.de/CodeSystems/IHEXDSclassCode"
        },
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "http://ihe-d.de/ValueSets/IHEXDSclassCode"
        }
      },
      {
        "id": "DocumentReference.category.coding:XDS.system",
        "path": "DocumentReference.category.coding.system",
        "short": "Kodiersystem",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.category.coding:XDS.code",
        "path": "DocumentReference.category.coding.code",
        "short": "Code",
        "comment": "Der XDS-Class-Code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.category.coding:XDS.display",
        "path": "DocumentReference.category.coding.display",
        "short": "Anzeigetext",
        "comment": "Der Anzeigetext zum XDS-Class-Code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.subject",
        "path": "DocumentReference.subject",
        "short": "Patientenbezug des Dokumentes",
        "comment": "Im MII-Kontext MUSS der referenzierte Patient konform zum [MII-Patient](https://www.medizininformatik-initiative.de/fhir/core/StructureDefinition/MII-Reference) des Basismoduls sein.\n  Für sonstige Kontexte siehe [FHIR Kernspezifikation](http://hl7.org/fhir/documentreference-definitions.html#DocumentReference.subject)",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Patient"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "DocumentReference.subject.reference",
        "path": "DocumentReference.subject.reference",
        "short": "Absolute oder relative URL des Patienten auf dem Server",
        "comment": "Absolute oder relative URL des Patienten auf dem Server",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "DocumentReference.date",
        "path": "DocumentReference.date",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.author",
        "path": "DocumentReference.author",
        "short": "Autor des Dokumentes",
        "comment": "Abweichend zu ISiK ist die Nennung des Namens oder Kürzels des Autors nicht ausreichend.\n  Eine Verlinkung auf einen Pracitioner (auflösbar auf dem Server) ist erforderlich.",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Practitioner"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "DocumentReference.author.reference",
        "path": "DocumentReference.author.reference",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.authenticator",
        "path": "DocumentReference.authenticator",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Practitioner"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "DocumentReference.custodian",
        "path": "DocumentReference.custodian",
        "short": "Verwalter des Dokumentes",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.relatesTo",
        "path": "DocumentReference.relatesTo",
        "comment": "Inbesondere relevant im Kontext von Updates. Bei inhaltlichen Updates MUSS eine `replaces`-Relation angegeben werden.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.description",
        "path": "DocumentReference.description",
        "comment": "Genaue menschenlesbare Beschreibung des Dokumentes, z.B. &quot;Lungenfunktionstest vom 18.02.2022&quot; Abweichend zu ISiK ist die Beschreibung nicht erforderlich.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.securityLabel",
        "path": "DocumentReference.securityLabel",
        "short": "Vertraulichkeit",
        "comment": "Abweichend zu ISiK ist die Angabe der Sicherheitsstufe nicht verpflichtend.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.content",
        "path": "DocumentReference.content",
        "short": "Beschreibung des Dokumenteninhaltes",
        "comment": "Abweichend zu ISiK ist können multiple Inhalte der Ressource angefügt werden.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.content.attachment",
        "path": "DocumentReference.content.attachment",
        "short": "Anhang",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.content.attachment.language",
        "path": "DocumentReference.content.attachment.language",
        "short": "Sprache, in der das Dokument verfasst wurde.",
        "comment": "Kann bei Systemen, die keine Mehrsprachigkeit unterstützen, fest auf &quot;de&quot; oder &quot;de-DE&quot; gesetzt werden.",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.content.attachment.url",
        "path": "DocumentReference.content.attachment.url",
        "short": "Referenz auf Dokument",
        "comment": "Um die Suche nach Dokumenten effizient zu gestalten, dürfen die Dokumente selbst nicht in die DocumentReference eingebettet werden, sondern müssen als separates Datenobjekt referenziert werden. ",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.content.format",
        "path": "DocumentReference.content.format",
        "short": "Format des Dokumentes",
        "comment": "Sofern das Dokument nicht auf einem standardisierten, strukturierten Austauschformat (z.B. CDA) basiert, für dessen Interpretation ein konkretes Schema herangezogen werden muss, genügt die Angabe des Codes &quot;urn:ihe:iti:xds:2017:mimeTypeSufficient&quot;",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context",
        "path": "DocumentReference.context",
        "short": "Klinischer Kontext",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.encounter",
        "path": "DocumentReference.context.encounter",
        "short": "Gesundheitseinrichtungskontakt",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.event",
        "path": "DocumentReference.context.event",
        "short": "Klinische Handlung",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.period",
        "path": "DocumentReference.context.period",
        "short": "",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.facilityType",
        "path": "DocumentReference.context.facilityType",
        "short": "Einrichtungsart",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.practiceSetting",
        "path": "DocumentReference.context.practiceSetting",
        "short": "Fachgebiet",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.sourcePatientInfo",
        "path": "DocumentReference.context.sourcePatientInfo",
        "mustSupport": true
      },
      {
        "id": "DocumentReference.context.related",
        "path": "DocumentReference.context.related",
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Encounter",
              "http://hl7.org/fhir/StructureDefinition/EpisodeOfCare"
            ]
          }
        ],
        "mustSupport": true
      }
    ]
  }
}
